<head>
	<title>PowderToy Image Converter</title>
	<link rel="stylesheet" type="text/css" href="index.css" />
	<link rel="stylesheet" type="text/css" href="checkboxes.css" />
	<meta charset="utf-8">
</head>

<body>
	<div>
		<canvas style="float:left; display:inline-block" width="500" height="500"></canvas>

		<div class="controls" style="display:inline-block" id="controlsDiv">
			<label class="fileControlButton" style="display:inline-block;">
				<p id="uploadFileText">Upload File</p>
				<input type="file" style="display:none;" accept="image/*" id="loadImageInput">
			</label>
			<br>
			<label>
				<input id="imageurlInput" style="margin-left: 4px; width:98%" placeholder="Or enter an image URL here!"></input>
			</label>
			<br>
			<br>
			<input type="button" class="ctrlLabel noDispButton" value="Control Size"></input>
			<input style="margin-left: 5px" class="slider" type="range" min="0" max="30" id="sizeControlSizeSlider" value="12">
			<br>
			<br>
			<div style="white-space: nowrap; display:inline-block">
				<input value="Deco" class="ctrlLabel noDispButton" style="display:inline-block;" type="button"></input>
				<input type="checkbox" id="DecoSwitch" class="checkbox" />
				<label style="text-align:center;" for="DecoSwitch" class="toggle">
					<p style="text-align:center;" class="noSelect switchtxt">&nbsp;&emsp;On&emsp;&emsp;&nbsp;Off</p>
				</label>
			</div>
			
			<div style="white-space: nowrap; display:inline-block">
				<input value="Powders" class="ctrlLabel noDispButton" style="display:inline-block;" type="button"></input>
				<input type="checkbox" id="PowderSwitch" class="checkbox" />
				<label style="text-align:center;" for="PowderSwitch" class="toggle">
					<p style="text-align:center;" class="noSelect switchtxt">&nbsp;&emsp;On&emsp;&emsp;&nbsp;Off</p>
				</label>
			</div>
			
			<br>
			<br>
			
			<label style="margin-left: 4px" class="container">Run on script start
				<input type="checkbox" onclick="this.checked ? functionnameInput.placeholder = 'function name (does not apply)' : functionnameInput.placeholder = 'Enter a function name (to draw the image | default is `image`)'" id="runOnStart">
				<span class="checkmark"></span>
			</label>
			
			<label style="margin-left: 4px" class="container">Fill in blank spaces
				<input type="checkbox" id='usewarp'>
				<span class="checkmark"></span>
			</label>
			
			<label style="margin-left: 4px" class="container">Fill in black spaces
				<input type="checkbox" id="useblack" checked="checked">
				<span class="checkmark"></span>
			</label>
			
			<label style="margin-left: 4px" class="container">Add Alpha transparency values to deco
				<input type="checkbox" id="usealpha" checked="checked">
				<span class="checkmark"></span>
			</label>
			
			<label style="margin-left: 4px" class="container">Use Alpha transparency filter for elements
				<input type="checkbox" id="usealphaE" checked="checked">
				<span class="checkmark"></span>
			</label>
			
			<div style="display:flex" title="only if above checkbox is checked">
			<input id="lblAplSlid" type="button" class="ctrlLabel noDispButton" value="Element Alpha Limit (255)" title="only if above checkbox is checked"></input>
			<input style="margin-left: 5px" class="slider" type="range" min="0" max="255" id="alphaElimit" title="only if above checkbox is checked" value="255">
			</div>
			
			<br>
			<br>
			
			<label>
				<input id="filenameInput" style="margin-left: 4px; width:98%" placeholder="Enter a filename here"></input>
			</label>
			<label>
				<input id="functionnameInput" style="margin-left: 4px; width:98%" placeholder="Enter a function name (to draw the image | default is `image`)"></input>
			</label>
			
			<br>
			<br>
			<br>
			<input type="button" style="width:98%" class="fileControlButton" value="Create Script" onclick="generateScript(!!DecoSwitch.checked, !!PowderSwitch.checked, !!usewarp.checked, !!usealpha.checked, !!useblack.checked, !!usealphaE.checked, alphaElimit.value, !!runOnStart.checked)">
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<a href="https://powdertoy.co.uk/Download/powder.zip" style="width:98%" class="fileControlButton">Download Powder Toy (Windows)</a>
		</div>
	</div>
	<script src='./gpu-browser.min.js'></script>
	<script src="index.js"></script>
	<script src="scripter.js"></script>
	<script>
		alphaElimit.addEventListener('change', function (e) {lblAplSlid.value = `Element Alpha Limit (${e.target.value})`})
		alphaElimit.addEventListener('input', function (e) {lblAplSlid.value = `Element Alpha Limit (${e.target.value})`})
		alphaElimit.addEventListener('load', function (e) {e.target.value = 255; lblAplSlid.value = `Element Alpha Limit (${e.target.value})`})
	</script>
</body>